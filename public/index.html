<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My First Golf Club</title>
  <link rel="stylesheet" href="/styles.css" />

  <!-- Leaflet CSS (map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <script defer src="https://challenges.cloudflare.com/turnstile/v0/api.js" async></script>
</head>
<body>
  <header class="site-header">
    <h1>My First Golf Club</h1>
    <p>Explore where golfers around the world played their first full round — and add your story.</p>
  </header>

  <!-- MAP SECTION -->
  <section id="map-section" class="card wide">
    <div id="map"></div>
  </section>

  <!-- STATS SECTION -->
  <section id="stats-section" class="card">
    <h2>Community stats</h2>
    <div class="stats-grid">
      <div class="stat">
        <div class="stat-label">Total users</div>
        <div class="stat-value" id="stat-total">—</div>
      </div>
      <div class="stat">
        <div class="stat-label">Average starting age</div>
        <div class="stat-value" id="stat-avg-age">—</div>
      </div>
      <div class="stat">
        <div class="stat-label">Most popular countries</div>
        <div class="stat-value" id="stat-top-countries">—</div>
      </div>
    </div>
  </section>

  <!-- FORM SECTION -->
  <section class="card">
    <h2>Share your first-round story</h2>
    <form id="mfgc-form" method="post" action="/api/submissions" enctype="multipart/form-data">
      <div class="grid">
        <label>First name
          <input name="firstName" required />
        </label>
        <label>Last initial
          <input name="lastInitial" maxlength="3" />
        </label>
      </div>

      <div class="grid">
        <label>City
          <input name="city" />
        </label>
        <label>Country
          <div class="field-relative">
            <input name="country" id="country" autocomplete="off" placeholder="Start typing…" required />
            <div id="country-suggestions" class="ac-list" role="listbox" style="display:none"></div>
          </div>
        </label>
      </div>

      <label>Golf club / course name
        <input name="firstGolfClub" required />
      </label>

      <label>When was your first round? (Month & Year)</label>
      <div class="grid">
        <select id="yearSelect" class="ym-select" aria-label="Year"></select>
        <select id="monthSelect" class="ym-select" aria-label="Month"></select>
      </div>
      <input type="hidden" name="firstRoundDate" id="firstRoundDate" />

      <div class="grid">
        <label>Age when you started
          <input name="ageWhenStarted" type="number" min="3" max="100" placeholder="e.g. 12" />
        </label>
        <label>Dream golf course
          <input name="dreamCourse" placeholder="e.g. St Andrews, Augusta…" />
        </label>
      </div>

      <label>How did you get into golf? (optional)
        <textarea name="howGotIntoGolf" maxlength="1000" placeholder="Who inspired you? Was it a friend, family, TV?"></textarea>
      </label>

      <label>Short story (optional)
        <textarea name="story" maxlength="2000" placeholder="A few lines about your first round…"></textarea>
      </label>

      <label>Photo (optional)
        <input type="file" name="photo" accept="image/*" />
      </label>

      <!-- Hidden: map coordinates (filled by geocoder) -->
      <input type="hidden" name="lat" id="lat" />
      <input type="hidden" name="lng" id="lng" />

      <!-- Privacy & consent -->
      <div class="checkbox">
        <label><input type="checkbox" name="consentMapPin" required /> I’m happy for a pin to appear on the map for this submission.</label>
      </div>

      <div class="cf-turnstile" data-sitekey="0x4AAAAAAB5r0dz4fZGQZB2z"></div>

      <button type="submit" class="btn">Submit</button>
      <p id="status" class="status"></p>
    </form>
  </section>

  <!-- Leaflet JS (map) -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- Our logic: map + stats -->
  <script src="/site.js"></script>
  <!-- Our logic: country autocomplete + month/year + geocoding fallback -->
  <script src="/form-enhancements.js"></script>
</body>
</html>
